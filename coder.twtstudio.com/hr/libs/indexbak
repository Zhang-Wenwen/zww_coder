<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">	<link rel="stylesheet" type="text/css" href="./libs/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<script src='./libs/jquery/jquery-1.11.0.min.js'></script>
	<script src='./libs/jquery/jquery.easing.1.3.min.js'></script>
	<script src="./libs/bootstrap/js/bootstrap.min.js"></script>
	<title>天外天工作室 2016 夏季纳新</title>
</head>
<body>
	<div class='container'>
	<h1 id='twtJoinSlogan' style="top: 13%">天外天工作室 Waiting For You!</h1>
	<div id='twtJoinLogin' style="display:block">
		<form class="form-horizontal" id='twtLoginForm'>
			<div class="form-group">
				<label for="inputAccount" class="col-sm-3 control-label">天外天帐号</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputAccount" required>
				</div>
			</div>
			<div class="form-group">
				<label for="inputPassword" class="col-sm-3 control-label">登录密码</label>
				<div class="col-sm-9">
					<input type="password" class="form-control" id="inputPassword" required>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-3 col-sm-9">
					<button type="button" onclick="onLoginSubmitClick()" class="btn btn-plat btn-block" style='font-size:16px'>登录</button>
				</div>
				<div class="col-sm-offset-3 col-sm-9">
					<a href="http://wenjin.in/account/newcomer/" class="btn btn-plat btn-block btn-register" style='font-size:16px'>注册</a>
				</div>
			</div>
		</form>
	</div>
	<div id='twtJoinFormWrap'>
		<form class="form-horizontal" id='twtJoinForm'>
			<div class="form-group">
				<label for="inputName" class="col-sm-3 control-label">姓名</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputName" readonly>
				</div>
			</div>
			<div class="form-group">
				<label for="inputCollege" class="col-sm-3 control-label">学院</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputCollege" readonly>
				</div>
			</div>
			<div class="form-group">
				<label for="inputMajor" class="col-sm-3 control-label">专业</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputMajor" readonly>
				</div>
			</div>
			<div class="form-group">
				<label for="inputGrade" class="col-sm-3 control-label">年级</label>
				<div class="col-sm-9">
					<input type="text" class="form-control" id="inputGrade" readonly>
				</div>
			</div> 
			<div class="form-group">
				<label for="inputContact" class="col-sm-3 control-label">联系方式</label>
				<div class="col-sm-9">
					<input type="telephone" class="form-control" id="inputContact" pattern="[0-9]" required>
				</div>
			</div>
      <div class="form-group">
        <label for="inputContact" class="col-sm-3 control-label">意向组别</label>
        <div class="col-sm-9">
          <select name="group" id="inputGroup">
            <option value="产品组">产品组</option>
            <option value="设计组">设计组</option>
            <option value="前端组">前端组</option>
            <option value="程序组">程序组</option>
            <option value="移动组Android">移动组Android</option>
            <option value="移动组iOS">移动组iOS</option>
          </select>
        </div>
      </div>
			<div class="form-group">
				<label for="inputReason" class="col-sm-3 control-label">加入原因</label>
				<div class="col-sm-9">
					<textarea type="text" class="form-control" id="inputReason" row='5' style='max-width:100%' required></textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-3 col-sm-9">
					<button type="button" onclick="onSubmitClick()" class="btn btn-plat btn-block" style='font-size:16px'>填好了</button>
				</div>
			</div>
		</form>
	</div>
	<div id='twtJoinResult'>
		<h2>提交成功</h2>
		<h2>请等待后续通知</h2>
	</div>
	</div>


	<script type="text/javascript">
		function onLoginSubmitClick()
		{
			$.ajax({
				url:"http://coder.twtstudio.com/index.php/home/api/login",
				data: {
					account: inputAccount.value,
					password: inputPassword.value
				},
				method: 'post',
				dataType: 'json',
				success: function(data){
					if(data.code)
					{
						data = data.data;
						inputName.value = data.name;
						inputCollege.value = data.college;
						inputMajor.value = data.major;
						inputGrade.value = data.grade;
						$('#twtJoinLogin').fadeOut(400,function(){
							$('#twtJoinFormWrap').fadeIn(1000);
						})
					}
					else
						alert(data.msg);
				}
			});
		}

		function onSubmitClick()
		{
			$.ajax({
				url:"http://coder.twtstudio.com/index.php/home/api/submit",
				data: {
					phone: inputContact.value,
					reason: inputReason.value,
          group: inputGroup.value
				},
				method: 'post',
				dataType: 'json',
				success: function(data){
					if(data.code)
					{
						$('#twtJoinFormWrap').fadeOut(400,function(){
							$('#twtJoinResult').fadeIn(1000);
						})
					}
					else
						alert(data.msg);
				}
			});
		}

	</script>
</body>
</html>
